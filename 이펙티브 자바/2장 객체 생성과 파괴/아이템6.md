# 아이템6 불필요한 객체 생성을 피하라
## 같은 기능을 객체를 매번 생성하기 보다는 재사용하자
* 예를 들어 보자
```java
String s = new Stirng("example");

Stromg s = "example";
```
* 똑같은 s를 사용할 때 new String을 하면 같은 역할의 객체를 여러 개 만들게 되어 수 많은 객체가 생성되지만 아래의 예처럼 인스턴스를 하나를 만들어 놓고 재사용하는 것이 훨씬 효율적인 경우가 많다.
## 불필요한 객체 생성을 피하는 법
* 생성자 대신 정적 팩터리 매서드(아이템1)를 제공하는 불변 클래스에서는 정적 팩터리 메서드를 사용해 불필요한 객체 생성을 피할 수 있다.
* Boolean(String) 생성자 대신 Boolean.valueOf(String) 팩터리 메서드를 사용하면 새로운 생성자처럼 매번 새로운 객체를 만드는 것이 아니기 때문에 성능적으로 좋다
## 값비싼 객체는 재사용하자
* 값비싼 객체 즉 리소스가 많이 들어가는 객체를 필요할 때마다 생성한다면 분명 성능이 저하될 것이다. 
* 예를 들어 String.matches를 통한 정규표현식은 성능이 중요한 상황에서 반복해 사용하기엔 적합하지 않다.
* 따라서 따로 캐싱해두고 메서드가 호출될 때마다 이 인스턴스를 재사용한다면 성능이 훨 씬 좋아질 것이다.
```java
static boolean  isMatches(String s){
    return s.matches("정규식"); //이렇게 한다면 메소드 호출 때마다 Pattern을 가져온다.
}

public class Match{
    private static final Pattern PATTERN = 정규식;
    
    static boolean isMatches(String s){
        return PATTERN.matcher(s).matches();//이렇게 캐싱한다면 클래스 초기화 과정에서 한 번만 Pattern을 불러오고 이 클래스를 재활용하면 된다.
    }
}
```
## 불필요한 객체를 만들어내는 예
* 어댑터는 실제 작업은 뒷단 객체에 위임하고 자신은 인터페이스 역할을 해주는 객체이다. 예를 들어 Map의 keySet 메서드는 Map의 키들은 Set 형태로 반환하는 메서드이다. 이 Set은 keySet을 호출할 때마다 사용하는 것이 아니라 같은 반환 객체를 사용한다. 따라서 반환된 객체 중 하나를 수정하면 모두 수정이 된다. 
* 이렇듯 모두 Map 인스턴스를 대변하기 때문에 객체를 여러 개 만들 필요가 없다.

* 또한 불필요한 객체를 만들어내는 예로 오토박싱(auto boxing)이 있다. 
* 오토박싱은 기본 타입과 그에 대응하는 박싱된 기본 타입의 구분을 흐려주지만, 완전 없애주지는 못한다.
* 만약 기본 타입으로 사용해도 되는데 박싱된 기본 타입을 사용하게 된다면 이는 굉장한 성능 저하 문제로 이어진다.
* 따라서 박싱된 기본 타입보다는 기본 타입을 사용하고, 의도치 않은 오토박싱이 숨어들지 않도록 주의해야 한다.

## 이번 아이템의 오해
객체 생성은 비싸니깐 생성을 피해야 하는 것이 아니다. 거꾸로 아주 무거운 객체가 아닌 다음에야 객체 생성을 피하고자 객체 풀(pool)을 만드는 것은 오히려 성능을 떨어뜨리는 짓이다. DB 연결 같은 생성 비용이 비싼 인스턴스 같은 경우 재사용하는 것이 좋다.
